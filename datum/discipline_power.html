<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/discipline_power - San Francisco</title></head><body><header><a href="index.html">San Francisco</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="datum/discipline_power.html#var">Var Details</a> - <a href="datum/discipline_power.html#proc">Proc Details</a></header><main><h1>discipline_power <aside>/<a href="datum.html">datum</a>/<a href="datum/discipline_power.html">discipline_power</a></aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L1"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/discipline_power.html#var/activate_sound">activate_sound</a></th><td>Sound file that plays to the user when this power is activated.</td></tr><tr><th><a href="datum/discipline_power.html#var/active">active</a></th><td>If this Discipline is currently in use.</td></tr><tr><th><a href="datum/discipline_power.html#var/aggravating">aggravating</a></th><td>If this power will upset NPCs when used on them.</td></tr><tr><th><a href="datum/discipline_power.html#var/cancelable">cancelable</a></th><td>If this power can be turned on and off.</td></tr><tr><th><a href="datum/discipline_power.html#var/check_flags">check_flags</a></th><td>Bitflags determining the requirements to cast this power</td></tr><tr><th><a href="datum/discipline_power.html#var/cooldown_length">cooldown_length</a></th><td>Amount of time it takes until this Discipline can be used again after activation.</td></tr><tr><th><a href="datum/discipline_power.html#var/cooldown_override">cooldown_override</a></th><td>If this power uses its own cooldown handling rather than the default handling</td></tr><tr><th><a href="datum/discipline_power.html#var/cooldown_timer">cooldown_timer</a></th><td>Timer tracking the cooldown of the power. Starts after deactivation if it has a duration and multi_active isn't true, after activation otherwise.</td></tr><tr><th><a href="datum/discipline_power.html#var/deactivate_sound">deactivate_sound</a></th><td>Sound file that plays to the user when this power is deactivated.</td></tr><tr><th><a href="datum/discipline_power.html#var/desc">desc</a></th><td>Description of the Discipline power</td></tr><tr><th><a href="datum/discipline_power.html#var/discipline">discipline</a></th><td>The Discipline that this power is part of.</td></tr><tr><th><a href="datum/discipline_power.html#var/duration_length">duration_length</a></th><td>Amount of time it takes until this Discipline deactivates itself. 0 if instantaneous.</td></tr><tr><th><a href="datum/discipline_power.html#var/duration_override">duration_override</a></th><td>If this power uses its own duration/deactivation handling rather than the default handling</td></tr><tr><th><a href="datum/discipline_power.html#var/duration_timers">duration_timers</a></th><td>Timer(s) tracking the duration of the power. Can have multiple if multi_activate is true.</td></tr><tr><th><a href="datum/discipline_power.html#var/effect_sound">effect_sound</a></th><td>Sound file that plays to all nearby players when this power is activated.</td></tr><tr><th><a href="datum/discipline_power.html#var/grouped_powers">grouped_powers</a></th><td>List of Discipline power types that cannot be activated alongside this power and share a cooldown with it.</td></tr><tr><th><a href="datum/discipline_power.html#var/hostile">hostile</a></th><td>If this power is an aggressive action and logged as such.</td></tr><tr><th><a href="datum/discipline_power.html#var/level">level</a></th><td>What rank of the Discipline this Discipline power belongs to.</td></tr><tr><th><a href="datum/discipline_power.html#var/multi_activate">multi_activate</a></th><td>If this power can (theoretically, not in reality) have multiple of its effects active at once.</td></tr><tr><th><a href="datum/discipline_power.html#var/name">name</a></th><td>Name of the Discipline power</td></tr><tr><th><a href="datum/discipline_power.html#var/owner">owner</a></th><td>The player using this Discipline power.</td></tr><tr><th><a href="datum/discipline_power.html#var/range">range</a></th><td>How many tiles away this power can be used from.</td></tr><tr><th><a href="datum/discipline_power.html#var/target_type">target_type</a></th><td>Bitflags determining what types of entities this power is allowed to target. NONE if self-targeting only.</td></tr><tr><th><a href="datum/discipline_power.html#var/toggled">toggled</a></th><td>If this Discipline doesn't automatically expire, but rather periodically drains blood.</td></tr><tr><th><a href="datum/discipline_power.html#var/violates_masquerade">violates_masquerade</a></th><td>If use of this power creates a visible Masquerade breach.</td></tr><tr><th><a href="datum/discipline_power.html#var/vitae_cost">vitae_cost</a></th><td>How many blood points this power costs to activate</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/discipline_power.html#proc/activate">activate</a></th><td>Triggers all the effects of the power being fully activated.</td></tr><tr><th><a href="datum/discipline_power.html#proc/can_activate">can_activate</a></th><td>Activation requirement checking proc that determines
if a given target is valid while also checking
can_activate_untargeted().</td></tr><tr><th><a href="datum/discipline_power.html#proc/can_activate_untargeted">can_activate_untargeted</a></th><td>Returns if this power can currently be activated
without accounting for target restrictions.</td></tr><tr><th><a href="datum/discipline_power.html#proc/can_afford">can_afford</a></th><td>Returns a boolean of if the caster can afford
this power's vitae cost.</td></tr><tr><th><a href="datum/discipline_power.html#proc/can_deactivate">can_deactivate</a></th><td>Overridable proc mirroring can_activate(), making sure
that deactivation won't result in a runtime in case of
the target not existing anymore while also checking
can_deactivate_untargeted(). Also sends signals that
allow for manual prevention of deactivation.</td></tr><tr><th><a href="datum/discipline_power.html#proc/can_deactivate_untargeted">can_deactivate_untargeted</a></th><td>Overridable proc called by try_deactivate() to make sure that
deactivating won't result in a runtime in case of the power
targeting the owner with them not existing. The equivalent
of can_activate_untargeted().</td></tr><tr><th><a href="datum/discipline_power.html#proc/clear_duration_timer">clear_duration_timer</a></th><td>Clears the last active timer (usually the first in the list).
If called before it expires, this immediately makes the
duration_timer expire without calling the relevant proc.</td></tr><tr><th><a href="datum/discipline_power.html#proc/cooldown_expire">cooldown_expire</a></th><td>Overridable proc called by the cooldown timer to handle
cooldown expiring. Has no behaviour besides making the action
visibly available again.</td></tr><tr><th><a href="datum/discipline_power.html#proc/deactivate">deactivate</a></th><td>Cancels the effects of the previously activated power.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_activate_sound">do_activate_sound</a></th><td>Overridable proc handling the sound played to the owner
only when using powers.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_caster_notification">do_caster_notification</a></th><td>Overridable proc handling the message sent to the user when activating
the power.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_cooldown">do_cooldown</a></th><td>Overridable proc handling the power's cooldown, which is a timer that triggers the cooldown_expire
proc when it ends, and is saved in cooldown_timer. This is called by both activate() and deactivate(),
but it only actually starts the cooldown in deactivate() unless multi_activate is TRUE. The
cooldown_override variable stops this from being triggered by activate() and deactivate() and allows
for extra modular behaviour. Cooldowns can manually be started by calling try_deactivate(), then deltimer()
and starting a new cooldown timer with your own length.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_duration">do_duration</a></th><td>Overridable proc handling the power's duration, which is a timer that triggers the
duration_expire proc when it ends, and is saved in duration_timers then deleted and cut
when it ends. The duration_override variable stops this from being triggered by activate()
and allows for extra modular behaviour. Duration expiring can be done manually by calling
try_deactivate(direct = TRUE).</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_effect_sound">do_effect_sound</a></th><td>Overridable proc handling the sound caused by the power's
effects, audible to everyone around it.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_logging">do_logging</a></th><td>Overridable proc handling the combat log created by using this power.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_masquerade_violation">do_masquerade_violation</a></th><td>Overridable proc handling Masquerade violations as a result
of using this power amongst NPCs.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_npc_aggro">do_npc_aggro</a></th><td>Overridable proc handling how the power aggravates NPCs
it's used on.</td></tr><tr><th><a href="datum/discipline_power.html#proc/do_refresh_checks">do_refresh_checks</a></th><td>Overridable proc that allows for extra modular code
in refreshing behaviour. Can do custom checks to see if activation
proceeds or not (must give its own feedback!) or can hijack
the refresh proc for its own behaviour.</td></tr><tr><th><a href="datum/discipline_power.html#proc/duration_expire">duration_expire</a></th><td>Overridable proc called by the duration timer to handle
duration expiring. Will refresh if toggled, or deactivate
otherwise after deleting the timer calling it.</td></tr><tr><th><a href="datum/discipline_power.html#proc/get_cooldown">get_cooldown</a></th><td>Returns the time left the cooldown timer, or
0 if there is none. Returning 0 means not on
cooldown.</td></tr><tr><th><a href="datum/discipline_power.html#proc/get_duration">get_duration</a></th><td>Returns the highest time left on any duration
timers, or 0 if there are none. Returning 0
means not active.</td></tr><tr><th><a href="datum/discipline_power.html#proc/post_gain">post_gain</a></th><td>Overridable proc that allows for code to affect the power's owner
when it is gained. Triggered by parent /datum/discipline/post_gain().</td></tr><tr><th><a href="datum/discipline_power.html#proc/pre_activation">pre_activation</a></th><td>Spends necessary resources (vitae) and makes sure activation is valid
before fully activating the power.</td></tr><tr><th><a href="datum/discipline_power.html#proc/pre_activation_checks">pre_activation_checks</a></th><td>An overridable proc that allows for custom pre_activation() behaviour.</td></tr><tr><th><a href="datum/discipline_power.html#proc/refresh">refresh</a></th><td>Handles refreshing toggled powers on a loop, spending necessary
resources and restarting the duration timer if it can proceed. If
it can't proceed, it directly deactivates the power.</td></tr><tr><th><a href="datum/discipline_power.html#proc/spend_resources">spend_resources</a></th><td>Overridable proc handling the spending of resources (vitae/blood)
when casting the power. Returns TRUE if successfully spent,
returns FALSE otherwise.</td></tr><tr><th><a href="datum/discipline_power.html#proc/try_activate">try_activate</a></th><td>Checks if activation is possible through can_activate(), then calls pre_activation() if it is.
Returns if activation successfully begun or not.</td></tr><tr><th><a href="datum/discipline_power.html#proc/try_deactivate">try_deactivate</a></th><td>Checks if the power can_deactivate() and deactivate()s if it can.
Also sends feedback the user if they successfully manually cancel it.
The deactivation equivalent of try_activate().</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/activate_sound"><aside class="declaration">var </aside>activate_sound <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 21"></a></h3><p>Sound file that plays to the user when this power is activated.</p><h3 id="var/active"><aside class="declaration">var </aside>active <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L57"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 57"></a></h3><p>If this Discipline is currently in use.</p><h3 id="var/aggravating"><aside class="declaration">var </aside>aggravating <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 27"></a></h3><p>If this power will upset NPCs when used on them.</p><h3 id="var/cancelable"><aside class="declaration">var </aside>cancelable <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L37"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 37"></a></h3><p>If this power can be turned on and off.</p><h3 id="var/check_flags"><aside class="declaration">var </aside>check_flags <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 11"></a></h3><p>Bitflags determining the requirements to cast this power</p><h3 id="var/cooldown_length"><aside class="declaration">var </aside>cooldown_length <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 43"></a></h3><p>Amount of time it takes until this Discipline can be used again after activation.</p><h3 id="var/cooldown_override"><aside class="declaration">var </aside>cooldown_override <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L47"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 47"></a></h3><p>If this power uses its own cooldown handling rather than the default handling</p><h3 id="var/cooldown_timer"><aside class="declaration">var </aside>cooldown_timer <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L55"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 55"></a></h3><p>Timer tracking the cooldown of the power. Starts after deactivation if it has a duration and multi_active isn't true, after activation otherwise.</p><h3 id="var/deactivate_sound"><aside class="declaration">var </aside>deactivate_sound <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 23"></a></h3><p>Sound file that plays to the user when this power is deactivated.</p><h3 id="var/desc"><aside class="declaration">var </aside>desc <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 5"></a></h3><p>Description of the Discipline power</p><h3 id="var/discipline"><aside class="declaration">var </aside>discipline <aside>â€“ /<a href="datum.html">datum</a>/<a href="datum/discipline.html">discipline</a></aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 59"></a></h3><p>The Discipline that this power is part of.</p><h3 id="var/duration_length"><aside class="declaration">var </aside>duration_length <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 41"></a></h3><p>Amount of time it takes until this Discipline deactivates itself. 0 if instantaneous.</p><h3 id="var/duration_override"><aside class="declaration">var </aside>duration_override <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L45"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 45"></a></h3><p>If this power uses its own duration/deactivation handling rather than the default handling</p><h3 id="var/duration_timers"><aside class="declaration">var </aside>duration_timers <aside>â€“ /list</aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L53"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 53"></a></h3><p>Timer(s) tracking the duration of the power. Can have multiple if multi_activate is true.</p><h3 id="var/effect_sound"><aside class="declaration">var </aside>effect_sound <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 25"></a></h3><p>Sound file that plays to all nearby players when this power is activated.</p><h3 id="var/grouped_powers"><aside class="declaration">var </aside>grouped_powers <aside>â€“ /list</aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 49"></a></h3><p>List of Discipline power types that cannot be activated alongside this power and share a cooldown with it.</p><h3 id="var/hostile"><aside class="declaration">var </aside>hostile <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 29"></a></h3><p>If this power is an aggressive action and logged as such.</p><h3 id="var/level"><aside class="declaration">var </aside>level <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 9"></a></h3><p>What rank of the Discipline this Discipline power belongs to.</p><h3 id="var/multi_activate"><aside class="declaration">var </aside>multi_activate <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 39"></a></h3><p>If this power can (theoretically, not in reality) have multiple of its effects active at once.</p><h3 id="var/name"><aside class="declaration">var </aside>name <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L3"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 3"></a></h3><p>Name of the Discipline power</p><h3 id="var/owner"><aside class="declaration">var </aside>owner <aside>â€“ /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a></aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L63"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 63"></a></h3><p>The player using this Discipline power.</p><h3 id="var/range"><aside class="declaration">var </aside>range <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 17"></a></h3><p>How many tiles away this power can be used from.</p><h3 id="var/target_type"><aside class="declaration">var </aside>target_type <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 15"></a></h3><p>Bitflags determining what types of entities this power is allowed to target. NONE if self-targeting only.</p><h3 id="var/toggled"><aside class="declaration">var </aside>toggled <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 35"></a></h3><p>If this Discipline doesn't automatically expire, but rather periodically drains blood.</p><h3 id="var/violates_masquerade"><aside class="declaration">var </aside>violates_masquerade <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 31"></a></h3><p>If use of this power creates a visible Masquerade breach.</p><h3 id="var/vitae_cost"><aside class="declaration">var </aside>vitae_cost <aside>â€“ </aside> <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 13"></a></h3><p>How many blood points this power costs to activate</p><h2 id="proc">Proc Details</h2><h3 id="proc/activate"><aside class="declaration">proc </aside>activate<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L390"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 390"></a></aside></h3><p>Triggers all the effects of the power being fully activated.</p>
<p>An overridable proc where the effects of the power are stored.
This being called means that activation has fully succeeded, so
duration and cooldown (when multi_activate is true) also begin
here. Specific basic activation behaviour (like the sound it makes
or the message it logs) can be modified by overriding the relevant
proc.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
</ul><h3 id="proc/can_activate"><aside class="declaration">proc </aside>can_activate<aside>(/<a href="atom.html">atom</a>/target, alert)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L237"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 237"></a></aside></h3><p>Activation requirement checking proc that determines
if a given target is valid while also checking
can_activate_untargeted().</p>
<p>When activating a power, this is called to get the final
result on if it can be activated or not. It first checks
can_activate_untargeted(), then if the power is targeted,
it handles logic for determining if a given target is valid
according to the given target_type.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
<li>alert - if this is being checked by the user and should give feedback on why it can't activate.</li>
</ul><h3 id="proc/can_activate_untargeted"><aside class="declaration">proc </aside>can_activate_untargeted<aside>(alert)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L119"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 119"></a></aside></h3><p>Returns if this power can currently be activated
without accounting for target restrictions.</p>
<p>This is where all checks according to check_flags for if a
power can be activated that don't concern the target are handled.
This is almost entirely checking traits on the owner to see if they're
incapacitated or whatnot, but some backend like deactivation
is also handled here. This is what's checked to see if the
power is selectable or unselectable (red).</p>
<p>Arguments:</p>
<ul>
<li>alert - if this is being checked by the user and should give feedback on why it can't activate.</li>
</ul><h3 id="proc/can_afford"><aside class="declaration">proc </aside>can_afford<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L102"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 102"></a></aside></h3><p>Returns a boolean of if the caster can afford
this power's vitae cost.</p><h3 id="proc/can_deactivate"><aside class="declaration">proc </aside>can_deactivate<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L588"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 588"></a></aside></h3><p>Overridable proc mirroring can_activate(), making sure
that deactivation won't result in a runtime in case of
the target not existing anymore while also checking
can_deactivate_untargeted(). Also sends signals that
allow for manual prevention of deactivation.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
</ul><h3 id="proc/can_deactivate_untargeted"><aside class="declaration">proc </aside>can_deactivate_untargeted<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L569"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 569"></a></aside></h3><p>Overridable proc called by try_deactivate() to make sure that
deactivating won't result in a runtime in case of the power
targeting the owner with them not existing. The equivalent
of can_activate_untargeted().</p><h3 id="proc/clear_duration_timer"><aside class="declaration">proc </aside>clear_duration_timer<aside>(to_clear)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L710"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 710"></a></aside></h3><p>Clears the last active timer (usually the first in the list).
If called before it expires, this immediately makes the
duration_timer expire without calling the relevant proc.</p><h3 id="proc/cooldown_expire"><aside class="declaration">proc </aside>cooldown_expire<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L560"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 560"></a></aside></h3><p>Overridable proc called by the cooldown timer to handle
cooldown expiring. Has no behaviour besides making the action
visibly available again.</p><h3 id="proc/deactivate"><aside class="declaration">proc </aside>deactivate<aside>(/<a href="atom.html">atom</a>/target, direct)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L621"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 621"></a></aside></h3><p>Cancels the effects of the previously activated power.</p>
<p>Handles all logic for deactivating the power, including
playing the deactivation sound, sending relevant signals,
and starting the cooldown. If directly called rather
than as a result of duration_expire, this also deletes
the relevant duration timer. Still called if duration_length
is 0.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
<li>direct - if this is being directly called instead of by duration_expire, and should delete the timer.</li>
</ul><h3 id="proc/do_activate_sound"><aside class="declaration">proc </aside>do_activate_sound<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L433"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 433"></a></aside></h3><p>Overridable proc handling the sound played to the owner
only when using powers.</p><h3 id="proc/do_caster_notification"><aside class="declaration">proc </aside>do_caster_notification<aside>(target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L483"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 483"></a></aside></h3><p>Overridable proc handling the message sent to the user when activating
the power.</p><h3 id="proc/do_cooldown"><aside class="declaration">proc </aside>do_cooldown<aside>(on_activation)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L518"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 518"></a></aside></h3><p>Overridable proc handling the power's cooldown, which is a timer that triggers the cooldown_expire
proc when it ends, and is saved in cooldown_timer. This is called by both activate() and deactivate(),
but it only actually starts the cooldown in deactivate() unless multi_activate is TRUE. The
cooldown_override variable stops this from being triggered by activate() and deactivate() and allows
for extra modular behaviour. Cooldowns can manually be started by calling try_deactivate(), then deltimer()
and starting a new cooldown timer with your own length.</p>
<p>Arguments:</p>
<ul>
<li>on_activation - if this proc is being called by activate(), which will stop it from triggering unless multi_activate is true.</li>
</ul><h3 id="proc/do_duration"><aside class="declaration">proc </aside>do_duration<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L499"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 499"></a></aside></h3><p>Overridable proc handling the power's duration, which is a timer that triggers the
duration_expire proc when it ends, and is saved in duration_timers then deleted and cut
when it ends. The duration_override variable stops this from being triggered by activate()
and allows for extra modular behaviour. Duration expiring can be done manually by calling
try_deactivate(direct = TRUE).</p><h3 id="proc/do_effect_sound"><aside class="declaration">proc </aside>do_effect_sound<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L441"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 441"></a></aside></h3><p>Overridable proc handling the sound caused by the power's
effects, audible to everyone around it.</p><h3 id="proc/do_logging"><aside class="declaration">proc </aside>do_logging<aside>(target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L489"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 489"></a></aside></h3><p>Overridable proc handling the combat log created by using this power.</p><h3 id="proc/do_masquerade_violation"><aside class="declaration">proc </aside>do_masquerade_violation<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L458"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 458"></a></aside></h3><p>Overridable proc handling Masquerade violations as a result
of using this power amongst NPCs.</p><h3 id="proc/do_npc_aggro"><aside class="declaration">proc </aside>do_npc_aggro<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L449"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 449"></a></aside></h3><p>Overridable proc handling how the power aggravates NPCs
it's used on.</p><h3 id="proc/do_refresh_checks"><aside class="declaration">proc </aside>do_refresh_checks<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L702"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 702"></a></aside></h3><p>Overridable proc that allows for extra modular code
in refreshing behaviour. Can do custom checks to see if activation
proceeds or not (must give its own feedback!) or can hijack
the refresh proc for its own behaviour.</p><h3 id="proc/duration_expire"><aside class="declaration">proc </aside>duration_expire<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L543"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 543"></a></aside></h3><p>Overridable proc called by the duration timer to handle
duration expiring. Will refresh if toggled, or deactivate
otherwise after deleting the timer calling it.</p><h3 id="proc/get_cooldown"><aside class="declaration">proc </aside>get_cooldown<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L75"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 75"></a></aside></h3><p>Returns the time left the cooldown timer, or
0 if there is none. Returning 0 means not on
cooldown.</p><h3 id="proc/get_duration"><aside class="declaration">proc </aside>get_duration<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L87"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 87"></a></aside></h3><p>Returns the highest time left on any duration
timers, or 0 if there are none. Returning 0
means not active.</p><h3 id="proc/post_gain"><aside class="declaration">proc </aside>post_gain<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L666"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 666"></a></aside></h3><p>Overridable proc that allows for code to affect the power's owner
when it is gained. Triggered by parent /datum/discipline/post_gain().</p><h3 id="proc/pre_activation"><aside class="declaration">proc </aside>pre_activation<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L342"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 342"></a></aside></h3><p>Spends necessary resources (vitae) and makes sure activation is valid
before fully activating the power.</p>
<p>The intermediary between can_activate() and activate(), this proc spends
resources, sends signals, checks an overridable proc to see if it should
continue or not, then fully activates the power. This can only fail
if an override of pre_activation_checks() or a signal handler forces it to.
This is useful for code that should trigger after activation is initiated, but
before the effects (probably) start.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
</ul><h3 id="proc/pre_activation_checks"><aside class="declaration">proc </aside>pre_activation_checks<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L374"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 374"></a></aside></h3><p>An overridable proc that allows for custom pre_activation() behaviour.</p>
<p>This is meant to be overridden by powers to allow for extra checks
on activation (eg. Social vs. Mentality for mental disciplines), to
delay activation with a do_after() (eg. Valeren 5 taking 10 seconds),
or possibly to hijack the pre_activation() proc by returning FALSE and
using its own logic instead (like activating on several targets in an
AoE rather than on one). Don't be fooled by the name, this is not just
for checks.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
</ul><h3 id="proc/refresh"><aside class="declaration">proc </aside>refresh<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L677"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 677"></a></aside></h3><p>Handles refreshing toggled powers on a loop, spending necessary
resources and restarting the duration timer if it can proceed. If
it can't proceed, it directly deactivates the power.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
</ul><h3 id="proc/spend_resources"><aside class="declaration">proc </aside>spend_resources<aside>()  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L471"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 471"></a></aside></h3><p>Overridable proc handling the spending of resources (vitae/blood)
when casting the power. Returns TRUE if successfully spent,
returns FALSE otherwise.</p><h3 id="proc/try_activate"><aside class="declaration">proc </aside>try_activate<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L531"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 531"></a></aside></h3><p>Checks if activation is possible through can_activate(), then calls pre_activation() if it is.
Returns if activation successfully begun or not.</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
</ul><h3 id="proc/try_deactivate"><aside class="declaration">proc </aside>try_deactivate<aside>(/<a href="atom.html">atom</a>/target, direct, alert)  <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/blob/1ecd171f2dfdeed206c3ad349ee9361f155bb72e/code/modules/wod13/datums/powers/discipline/__discipline_power.dm#L653"><img src="git.png" width="16" height="16" title="code/modules/wod13/datums/powers/discipline/__discipline_power.dm 653"></a></aside></h3><p>Checks if the power can_deactivate() and deactivate()s if it can.
Also sends feedback the user if they successfully manually cancel it.
The deactivation equivalent of try_activate().</p>
<p>Arguments:</p>
<ul>
<li>target - what the targeted Discipline (null otherwise) is being used on.</li>
<li>direct - if the power is being directly deactivated or as a result of duration_expire.</li>
<li>alert - if the caster is manually deactivating and feedback should be sent on success.</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/xxxnoscopexx/World-of-Darkness-13/tree/1ecd171f2dfdeed206c3ad349ee9361f155bb72e">1ecd171</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>